# Инструкция по релизу для UV Workspace

## Описание
Проект использует UV workspace с основным проектом и несколькими пакетами в `packages/`.
- Основной проект имеет свой GitHub-репозиторий и использует UV workspace.
- Основной проект управляется файлами: `pyproject.toml`, `pyproject.prod.toml`, `publish.yml`
- Каждый пакет в `packages/` имеет свой отдельный GitHub-репозиторий
- Мы не храним пакеты в репозитории основного проекта
- Используется conventional commit стандарт

## Процесс релиза

### 1. Подготовка
- Определить какие пакеты из `packages/` изменились
- Создать файл `./docs/realise_changelog.md` для отслеживания изменений

### 2. Релиз пакетов

Проходим по каждому пакету и выполняем для него все действия указанные ниже:
1. Проанализировать есть ли изменения в пакете
Отражаем так же изменения в зависимостях проекта или способов управления зависимостями.
2. Если есть то:
- Увеличить версию: `0.1.2.dev<number>` -> `0.1.2.dev<number +1 >`
- Создать structured commit message
- Создать аннотированный тег с версией пакета
- Записать в changelog информацию о коммите
- Удалить временные файлы с commit messages

Переходим к следующему пакету.

### 3. Релиз основного проекта
1. Проанализировать есть ли изменения в основном проекте
2. Если есть то:
- Поднять версию в `pyproject.toml`: `0.0.<number + 1>`
- Создать structured commit message по conventional commit
- Создать аннотированный тег с новой версией
- Записать в changelog информацию о коммите
- Удалить временные файлы с commit messages

### 4. Завершение
- Дополним changelog с полными commit message для каждого пакета и проекта
- Выполнить push commit и push tag для каждого измененного пакета и проекта

## Шаблон Conventional Commit 

### Типы коммитов:
- `feat`: новая функциональность
- `fix`: исправление ошибки
- `docs`: изменения в документации
- `style`: форматирование, отсутствие функциональных изменений
- `refactor`: рефакторинг кода
- `test`: добавление или изменение тестов
- `chore`: обновление зависимостей, конфигурации и т.д.