# –ö–æ–Ω—Ü–µ–ø—Ü–∏—è –ø—Ä–æ—Ü–µ—Å—Å–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

## –û–±—â–∞—è –∏–¥–µ—è

–ü—Ä–æ–µ–∫—Ç –ø–æ—Å—Ç—Ä–æ–µ–Ω –Ω–∞ –ø—Ä–∏–Ω—Ü–∏–ø–∞—Ö **–º–∏–∫—Ä–æ–ø–∞–∫–µ—Ç–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã** —Å **–∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è–º–∏** –∏ **—Ç—Ä–µ–º—è —Ä–µ–∂–∏–º–∞–º–∏ —Ä–∞–±–æ—Ç—ã** (dev/staging/prod), –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ —á–µ—Ä–µ–∑ **uv workspaces** –∏ **—Ä–µ–ª–∏–∑–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞—Ä–∏–π**.

## 1. –ú–∏–∫—Ä–æ–ø–∞–∫–µ—Ç–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

–ö–∞–∂–¥—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç ‚Äî —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω—ã–π Python-–ø–∞–∫–µ—Ç —Å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏ –∏ —Å–±–æ—Ä–∫–æ–π —á–µ—Ä–µ–∑ `hatchling`.

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
project/
‚îú‚îÄ‚îÄ pyproject.toml              # dev-—Ä–µ–∂–∏–º
‚îú‚îÄ‚îÄ staging/pyproject.toml      # staging-—Ä–µ–∂–∏–º
‚îú‚îÄ‚îÄ prod/pyproject.toml         # prod-—Ä–µ–∂–∏–º
‚îú‚îÄ‚îÄ packages/                   # python-–ø–∞–∫–µ—Ç—ã (git submodules)
‚îÇ   ‚îú‚îÄ‚îÄ bench-utils/
‚îÇ   ‚îú‚îÄ‚îÄ model-interface/
‚îÇ   ‚îî‚îÄ‚îÄ model-qwen2-5-vl/
‚îî‚îÄ‚îÄ docker/Dockerfile-uv        # —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è —Å–±–æ—Ä–∫–∞
```

## 2. –ò–∑–æ–ª—è—Ü–∏—è —á–µ—Ä–µ–∑ git submodules

–ö–∞–∂–¥—ã–π python-–ø–∞–∫–µ—Ç ‚Äî **–æ—Ç–¥–µ–ª—å–Ω—ã–π GitHub-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π**, –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã–π –∫–∞–∫ `git submodule`.

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è –∫–æ–º–º–∏—Ç–æ–≤, —Ç–µ–≥–∏ –≤–µ—Ä—Å–∏–π –∏ –≤–µ—Ç–∫–∏;
- –∏–∑–æ–ª—è—Ü–∏—é CI/CD-–ø–∞–π–ø–ª–∞–π–Ω–æ–≤ –∫–∞–∂–¥–æ–≥–æ –ø–∞–∫–µ—Ç–∞;
- –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ—Ç–∫—Ä—ã–≤–∞—Ç—å Pull Request-—ã –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞.

## 3. –¢—Ä–∏ —Ä–µ–∂–∏–º–∞ —Ä–∞–±–æ—Ç—ã

–í –ø—Ä–æ—Ü–µ—Å—Å–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ ML-–ø—Ä–æ–µ–∫—Ç–æ–≤ –≤–æ–∑–Ω–∏–∫–∞—é—Ç —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Å—Ç–∞–¥–∏–∏:

### –ê–∫—Ç–∏–≤–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞
- –ù—É–∂–Ω–∞ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –±—ã—Å—Ç—Ä–æ –≤–Ω–æ—Å–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥ python-–ø–∞–∫–µ—Ç–∞ –∏ —Å—Ä–∞–∑—É –≤–∏–¥–µ—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç
- –£–¥–æ–±–Ω–æ –∏–º–µ—Ç—å –≤—Å–µ –ø–∞–∫–µ—Ç—ã –ø–æ–¥ —Ä—É–∫–æ–π –≤ editable-—Ä–µ–∂–∏–º–µ
- –¢—Ä–µ–±—É—é—Ç—Å—è dev-–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –æ—Ç–ª–∞–¥–∫–∏

### –ü—Ä–µ–¥—Ä–µ–ª–∏–∑–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- –ù–µ–æ–±—Ö–æ–¥–∏–º–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –Ω–∞ ¬´–ø–æ—á—Ç–∏ —Ñ–∏–Ω–∞–ª—å–Ω—ã—Ö¬ª –≤–µ—Ä—Å–∏—è—Ö
- –í–∞–∂–Ω–æ –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å –≤–µ—Ä—Å–∏–∏ –¥–ª—è –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- –û–∫—Ä—É–∂–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –±–ª–∏–∑–∫–æ –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É

### –ü—Ä–æ–¥–∞–∫—à–µ–Ω –∏ CI/CD
- –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–∞ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º–æ—Å—Ç—å —Å–±–æ—Ä–∫–∏
- –ù—É–∂–Ω—ã —Ç–æ–ª—å–∫–æ —Å—Ç–∞–±–∏–ª—å–Ω—ã–µ, –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –≤–µ—Ä—Å–∏–∏
- –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –Ω–∞–±–æ—Ä –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –±–µ–∑ dev-–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤
- –ë—ã—Å—Ç—Ä–∞—è —Å–±–æ—Ä–∫–∞ –±–µ–∑ –ª–∏—à–Ω–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

## 4. –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

**uv workspaces** –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç:
- –ï–¥–∏–Ω—ã–π lock-—Ñ–∞–π–ª –∏ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—É—é —Å—Ä–µ–¥—É
- –¢—Ä–∏ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö `pyproject.toml` –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ä–µ–∂–∏–º–æ–≤
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏

| –†–µ–∂–∏–º | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ | –ò—Å—Ç–æ—á–Ω–∏–∫ –ø–∞–∫–µ—Ç–æ–≤ |
|-------|------------|------------------|
| **dev** | –ê–∫—Ç–∏–≤–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ | –õ–æ–∫–∞–ª—å–Ω—ã–µ (editable) |
| **staging** | –ü—Ä–µ–¥—Ä–µ–ª–∏–∑–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ | Git dev-—Ç–µ–≥–∏ |
| **prod** | –ü—Ä–æ–¥–∞–∫—à–µ–Ω –∏ CI/CD | Git —Å—Ç–∞–±–∏–ª—å–Ω—ã–µ —Ç–µ–≥–∏ |

> üìñ **–ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏:** [Dev-, Staging- –∏ Prod-—Ä–µ–∂–∏–º—ã](02_dev_staging_prod.md)

## 5. –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —Ä–µ–ª–∏–∑–æ–≤

–î–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è —Ä–µ–ª–∏–∑–æ–≤ –¥–ª—è UV workspace –ø—Ä–æ–µ–∫—Ç–æ–≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω **`release_tool`** ([GitHub](https://github.com/VLMHyperBenchTeam/release_tool))

### –ö–ª—é—á–µ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
- **üì¶ UV Workspace**: —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –¥–ª—è –º–∏–∫—Ä–æ–ø–∞–∫–µ—Ç–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
- **üîß Git submodule**: –ª–µ–≥–∫–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø—Ä–æ–µ–∫—Ç—ã
- **üõ°Ô∏è –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: dry-run —Ä–µ–∂–∏–º –∏ –ø–æ—ç—Ç–∞–ø–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ
- **üìä –°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–µ –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ**: patch/minor/major/dev bumps
- **üß† LLM-–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**: –ò–ò –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Å–º—ã—Å–ª–µ–Ω–Ω—ã—Ö commit/tag —Å–æ–æ–±—â–µ–Ω–∏–π

### –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä—É–µ—Ç
- –û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –∏ –æ–ø–∏—Å–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –ø–∞–∫–µ—Ç–∞—Ö
- –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–º–∏—Ç–æ–≤, —Ç–µ–≥–æ–≤ –∏ GitHub-—Ä–µ–ª–∏–∑–æ–≤
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –º–µ–∂–¥—É dev/staging/prod —Ä–µ–∂–∏–º–∞–º–∏
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–µ—Ä—Å–∏—è–º–∏ –∏ dev-–≤–µ—Ç–∫–∞–º–∏

## 6. Docker-—Å–±–æ—Ä–∫–∞

**–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π `docker/Dockerfile-uv`** –¥–ª—è –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º—ã—Ö –¥–µ–ø–ª–æ–π–º–µ–Ω—Ç–æ–≤ –∏–∑ uv-–æ–∫—Ä—É–∂–µ–Ω–∏–π.

### –û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã
- **–û–¥–∏–Ω Dockerfile** –¥–ª—è dev –∏ prod —Ä–µ–∂–∏–º–æ–≤
- **–ú–Ω–æ–≥–æ—Å—Ç—É–ø–µ–Ω—á–∞—Ç–∞—è —Å–±–æ—Ä–∫–∞**: `base` ‚Üí `deps` ‚Üí `wheel` ‚Üí `runtime`
- **–ì–∏–±–∫–∏–µ build-–∞—Ä–≥—É–º–µ–Ω—Ç—ã**: CUDA-–≤–µ—Ä—Å–∏—è, –±–∞–∑–æ–≤—ã–π –æ–±—Ä–∞–∑, CMake
- **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ**: —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–ª–æ–µ–≤ Docker

### ML-—Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–±–æ—Ä–∫–∞ `flash-attn`** –ø–æ–¥ –Ω—É–∂–Ω—É—é CUDA-–≤–µ—Ä—Å–∏—é
- **Lock-—Ñ–∞–π–ª –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º–æ—Å—Ç—å**: `uv sync --locked`
- **–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ runtime-–æ–±—Ä–∞–∑—ã**: –±–µ–∑ –∏—Å—Ö–æ–¥–Ω–∏–∫–æ–≤ –∏ dev-–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–∑–Ω—ã—Ö PyTorch-–±—ç–∫–µ–Ω–¥–æ–≤**: cu124, cu128

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–ª–æ–µ–≤
1. **–ë–∞–∑–æ–≤—ã–π**: —Å–∏—Å—Ç–µ–º–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ + —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π `uv`
2. **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**: —Ä–∞–∑–¥–µ–ª—å–Ω—ã–µ —Å–ª–æ–∏ –¥–ª—è dev/prod –æ–∫—Ä—É–∂–µ–Ω–∏–π
3. **Wheel-—Å–±–æ—Ä–∫–∞**: –∫–æ–º–ø–∏–ª—è—Ü–∏—è `flash-attn` —Å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º
4. **–§–∏–Ω–∞–ª—å–Ω—ã–µ**: –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ runtime-–æ–±—Ä–∞–∑—ã

> üìñ **–ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏:** [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ Docker-—Å–±–æ—Ä–∫–µ](07_docker_builder_full.md)

## Workflow —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

```mermaid
graph TD
    A[–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞<br/>packages/*] --> B[dev-—Ä–µ–∂–∏–º<br/>uv sync]
    B --> C[–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ]
    C --> D[release_tool<br/>—Å–æ–∑–¥–∞–µ—Ç dev-—Ç–µ–≥]
    D --> E[staging-—Ä–µ–∂–∏–º<br/>–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã]
    E --> F[release_tool<br/>—Å–æ–∑–¥–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω—ã–π —Ç–µ–≥]
    F --> G[prod-—Ä–µ–∂–∏–º<br/>CI/CD —Å–±–æ—Ä–∫–∞]
    G --> H[Docker-–æ–±—Ä–∞–∑<br/>–¥–µ–ø–ª–æ–π]
```

> üí° **–ü—Ä–∏–Ω—Ü–∏–ø:** –ö–∞–∂–¥—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω, –Ω–æ –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ –µ–¥–∏–Ω—É—é —Å–∏—Å—Ç–µ–º—É —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏ –∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ä–µ–ª–∏–∑–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å.
