# –ö–æ–Ω—Ü–µ–ø—Ü–∏—è –ø—Ä–æ—Ü–µ—Å—Å–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

## –û–±—â–∞—è –∏–¥–µ—è

–ü—Ä–æ–µ–∫—Ç –ø–æ—Å—Ç—Ä–æ–µ–Ω –Ω–∞ –ø—Ä–∏–Ω—Ü–∏–ø–∞—Ö **–º–∏–∫—Ä–æ–ø–∞–∫–µ—Ç–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã** —Å **–∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è–º–∏** –∏ **—Ç—Ä–µ–º—è —Ä–µ–∂–∏–º–∞–º–∏ —Ä–∞–±–æ—Ç—ã** (dev/staging/prod), –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ —á–µ—Ä–µ–∑ **uv workspaces** –∏ **—Ä–µ–ª–∏–∑–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞—Ä–∏–π**.

## 1. –ú–∏–∫—Ä–æ–ø–∞–∫–µ—Ç–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

–ö–∞–∂–¥—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç ‚Äî —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω—ã–π Python-–ø–∞–∫–µ—Ç —Å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏ –∏ —Å–±–æ—Ä–∫–æ–π —á–µ—Ä–µ–∑ `hatchling`.

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
project/
‚îú‚îÄ‚îÄ pyproject.toml              # dev-—Ä–µ–∂–∏–º
‚îú‚îÄ‚îÄ staging/pyproject.toml      # staging-—Ä–µ–∂–∏–º
‚îú‚îÄ‚îÄ prod/pyproject.toml         # prod-—Ä–µ–∂–∏–º
‚îú‚îÄ‚îÄ packages/                   # python-–ø–∞–∫–µ—Ç—ã (git submodules)
‚îÇ   ‚îú‚îÄ‚îÄ bench-utils/
‚îÇ   ‚îú‚îÄ‚îÄ model-interface/
‚îÇ   ‚îî‚îÄ‚îÄ model-qwen2-5-vl/
‚îî‚îÄ‚îÄ docker/Dockerfile-uv        # —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è —Å–±–æ—Ä–∫–∞
```

## 2. –ò–∑–æ–ª—è—Ü–∏—è —á–µ—Ä–µ–∑ git submodules

–ö–∞–∂–¥—ã–π python-–ø–∞–∫–µ—Ç ‚Äî **–æ—Ç–¥–µ–ª—å–Ω—ã–π GitHub-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π**, –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã–π –∫–∞–∫ `git submodule`.

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è –∫–æ–º–º–∏—Ç–æ–≤, —Ç–µ–≥–∏ –≤–µ—Ä—Å–∏–π –∏ –≤–µ—Ç–∫–∏;
- –∏–∑–æ–ª—è—Ü–∏—é CI/CD-–ø–∞–π–ø–ª–∞–π–Ω–æ–≤ –∫–∞–∂–¥–æ–≥–æ –ø–∞–∫–µ—Ç–∞;
- –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ—Ç–∫—Ä—ã–≤–∞—Ç—å Pull Request-—ã –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞.

## 3. –¢—Ä–∏ —Ä–µ–∂–∏–º–∞ —Ä–∞–±–æ—Ç—ã

| –†–µ–∂–∏–º | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ | –ò—Å—Ç–æ—á–Ω–∏–∫ –ø–∞–∫–µ—Ç–æ–≤ |
|-------|------------|------------------|
| **dev** | –ê–∫—Ç–∏–≤–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ | –õ–æ–∫–∞–ª—å–Ω—ã–µ (editable) |
| **staging** | –ü—Ä–µ–¥—Ä–µ–ª–∏–∑–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ | Git dev-—Ç–µ–≥–∏ |
| **prod** | CI/CD –∏ –¥–µ–ø–ª–æ–π | Git —Å—Ç–∞–±–∏–ª—å–Ω—ã–µ —Ç–µ–≥–∏ |

> üìñ **–ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏:** [Dev-, Staging- –∏ Prod-—Ä–µ–∂–∏–º—ã](02_dev_staging_prod.md)

## 4. –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

**uv workspaces** –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç:
- –ï–¥–∏–Ω—ã–π lock-—Ñ–∞–π–ª –∏ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—É—é —Å—Ä–µ–¥—É
- –¢—Ä–∏ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö `pyproject.toml` –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ä–µ–∂–∏–º–æ–≤
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏

**–ö–æ–º–∞–Ω–¥—ã:**
```bash
uv sync --extra cu124                  # dev
uv sync --project staging --frozen     # staging
uv sync --project prod --frozen        # prod
```

## 5. –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —Ä–µ–ª–∏–∑–æ–≤

**`release_tool`** –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä—É–µ—Ç:
- –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–º–∏—Ç–æ–≤, —Ç–µ–≥–æ–≤ –∏ GitHub-—Ä–µ–ª–∏–∑–æ–≤
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—é diff-—Ñ–∞–π–ª–æ–≤ –¥–ª—è –æ–ø–∏—Å–∞–Ω–∏–π
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –º–µ–∂–¥—É —Ä–µ–∂–∏–º–∞–º–∏

## 6. Docker-—Å–±–æ—Ä–∫–∞

**–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π `Dockerfile-uv`:**
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ dev/prod —Ä–µ–∂–∏–º–æ–≤
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–±–æ—Ä–∫–∞ `flash-attn`
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö CUDA-–≤–µ—Ä—Å–∏–π

> üìñ **–ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏:** [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ Docker-—Å–±–æ—Ä–∫–µ](07_docker_builder_full.md)

## Workflow —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

```mermaid
graph LR
    A[–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞<br/>packages/*] --> B[dev-—Ä–µ–∂–∏–º<br/>uv sync]
    B --> C[–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ]
    C --> D[release_tool<br/>—Å–æ–∑–¥–∞–µ—Ç dev-—Ç–µ–≥]
    D --> E[staging-—Ä–µ–∂–∏–º<br/>–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã]
    E --> F[release_tool<br/>—Å–æ–∑–¥–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω—ã–π —Ç–µ–≥]
    F --> G[prod-—Ä–µ–∂–∏–º<br/>CI/CD —Å–±–æ—Ä–∫–∞]
    G --> H[Docker-–æ–±—Ä–∞–∑<br/>–¥–µ–ø–ª–æ–π]
```

## –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ–∞–π–ª—ã –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

- **[02_dev_staging_prod.md](02_dev_staging_prod.md)** ‚Äî –¥–µ—Ç–∞–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Ä–µ–∂–∏–º–æ–≤ —Ä–∞–±–æ—Ç—ã
- **[07_docker_builder_full.md](07_docker_builder_full.md)** ‚Äî –ø–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ Docker-—Å–±–æ—Ä–∫–µ
- **[09_torch_backends.md](09_torch_backends.md)** ‚Äî –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ CUDA-–±—ç–∫–µ–Ω–¥–æ–≤ PyTorch

---

> üí° **–ü—Ä–∏–Ω—Ü–∏–ø:** –ö–∞–∂–¥—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω, –Ω–æ –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ –µ–¥–∏–Ω—É—é —Å–∏—Å—Ç–µ–º—É —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏ –∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ä–µ–ª–∏–∑–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å.
